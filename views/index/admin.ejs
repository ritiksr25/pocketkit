<% include ../partials/head %>
<div class="fluid-container ">
	<div class="container">
		<div class="col">
			<h1 class="title main__title text-center pt-4">Admin Dashboard</h1>
		</div>
		<h1 class="title main__title pt-4" style="font-size: 20px; margin-bottom: 30px">
			Total Users: <%=users.length%>
		</h1>
		<form action="/admin" method="get">
			<div class="row">
				<div class="col-lg-3">
					<input class="search-input mb-2" name="search" type="text" placeholder="Search users"
						required />
				</div>
				<div class="col-lg-3">
					<button type="submit" class="btn btn-outline-dark sub_btn custom_btn">
						Search
					</button>
				</div>
			</div>
		</form>
		<div class="mt-4">
			<div class="title" style="margin: 50px 0 50px 0">
				<h3>Users of the Application</h3>
			</div>
			<table class="table">
				<thead>
					<tr>
						<th scope="col">Image</th>
						<th scope="col">Name</th>
						<th scope="col">Email</th>
						<th scope="col">Date</th>
						<th scope="col">?</th>
					</tr>
				</thead>
				<tbody>
					<% users.forEach(user => { %>
					<tr>
						<th scope="row">
							<img class="img-fluid" src="<%=user.img%>" alt="logo"
								style="height: 40px; width: 40px; border-radius: 5px;" />
						</th>

						<td>
							<%=user.name%>
						</td>
						<td>
							<%=user.email%>
						</td>
						<td>
							<%=user.createdAt.toString().slice(0,33)%>
						</td>
						<td>
							<a href="/admin/delete/<%=user._id%>"
								onclick="return confirm('Are you sure you want to delete this User?');"
								class="btn btn-danger">Delete</a>
						</td>
					</tr>
					<% }) %>
				</tbody>
			</table>
		</div>
	</div>
</div>
<% include ../partials/footer %>